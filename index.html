<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>香港新聞網</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="bg-gray-100 font-sans">
  <!-- 導航欄 -->
  <nav class="bg-blue-800 text-white p-4 sticky top-0 z-10">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-bold">香港新聞網</h1>
      <div class="flex items-center space-x-4">
        <ul class="flex space-x-4">
          <li><a href="#home" class="hover:underline">首頁</a></li>
          <li><a href="#local" class="hover:underline">本地</a></li>
          <li><a href="#world" class="hover:underline">國際</a></li>
          <li><a href="#finance" class="hover:underline">財經</a></li>
        </ul>
        <div class="relative">
          <input type="text" id="search" class="p-2 rounded text-black" placeholder="搜尋新聞...">
          <i class="fas fa-search absolute right-2 top-3 text-gray-500"></i>
        </div>
        <div class="text-sm">
          <p>當前時間: <span id="current-time"></span></p>
          <p>最後更新: <span id="last-update">尚未更新</span></p>
        </div>
      </div>
    </div>
  </nav>

  <!-- 主內容 -->
  <main class="container mx-auto mt-8 px-4">
    <!-- 頭條區 -->
    <section id="home" class="mb-12">
      <h2 class="text-3xl font-bold mb-4">頭條新聞</h2>
      <div id="headline" class="bg-white p-6 rounded-lg shadow-md flex"></div>
    </section>

    <!-- 本地新聞 -->
    <section id="local" class="mb-12">
      <h2 class="text-3xl font-bold mb-4">本地新聞</h2>
      <div id="local-news" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>
  </main>

  <!-- 頁腳 -->
  <footer class="bg-gray-800 text-white p-4 mt-12">
    <div class="container mx-auto text-center">
      <p>© 2025 香港新聞網。版權所有。新聞數據由 <a href="https://newsdata.io" class="underline">NewsData.io</a> 提供。</p>
      <p class="mt-2">聯繫我們 | 隱私政策 | 使用條款</p>
    </div>
  </footer>

  <script>
    // 格式化日期和時間（香港時區）
    function formatDateTime(date) {
      return date.toLocaleString('zh-TW', {
        timeZone: 'Asia/Hong_Kong',
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false
      });
    }

    // 更新當前時間（每秒）
    function updateCurrentTime() {
      const currentTimeElement = document.getElementById('current-time');
      currentTimeElement.textContent = formatDateTime(new Date());
    }
    setInterval(updateCurrentTime, 1000); // 每秒更新
    updateCurrentTime(); // 初始調用

    // 你的 NewsData.io API 密鑰
    const apiKey = '你的NewsData_API密鑰'; // 替換為你的 API 密鑰
    const baseUrl = 'https://newsdata.io/api/1/latest';

    // 獲取新聞並更新最後更新時間
    fetch(`${baseUrl}?apikey=${apiKey}&language=zh&country=hk`)
      .then(response => response.json())
      .then(data => {
        if (data.status === 'success' && data.results.length > 0) {
          // 更新最後更新時間
          const lastUpdateElement = document.getElementById('last-update');
          lastUpdateElement.textContent = formatDateTime(new Date());

          // 渲染頭條新聞
          const headline = data.results[0];
          const headlineContainer = document.getElementById('headline');
          headlineContainer.innerHTML = `
            <img src="${headline.image_url || 'https://via.placeholder.com/300x200'}" alt="${headline.title}" class="w-1/3 rounded">
            <div class="ml-4">
              <h3 class="text-2xl font-semibold">${headline.title}</h3>
              <p class="text-gray-600 mt-2">${headline.description || '無摘要'}</p>
              <a href="${headline.link}" class="text-blue-600 hover:underline mt-4 inline-block" target="_blank">閱讀更多</a>
            </div>
          `;

          // 渲染本地新聞
          const localNewsContainer = document.getElementById('local-news');
          data.results.slice(1, 7).forEach(article => {
            localNewsContainer.innerHTML += `
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold">${article.title}</h3>
                <p class="text-gray-600 mt-2">${article.description || '無摘要'}</p>
                <a href="${article.link}" class="text-blue-600 hover:underline mt-4 inline-block" target="_blank">閱讀更多</a>
              </div>
            `;
          });
        } else {
          console.error('No news data available');
        }
      })
      .catch(error => console.error('Error fetching news:', error));

    // 平滑滾動
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth'
        });
      });
    });

    // 搜索功能
    document.getElementById('search').addEventListener('input', function (e) {
      const query = e.target.value.toLowerCase();
      const articles = document.querySelectorAll('#local-news .bg-white');
      articles.forEach(article => {
        const title = article.querySelector('h3').textContent.toLowerCase();
        const description = article.querySelector('p').textContent.toLowerCase();
        article.style.display = (title.includes(query) || description.includes(query)) ? 'block' : 'none';
      });
    });
  </script>
</body>
</html>
